Create database QLTOURLTW
GO
use QLTOURLTW
GO
SET DATEFORMAT DMY
GO
CREATE TABLE KHACHHANG
(
	MAKH VARCHAR(11) NOT NULL PRIMARY KEY,
	HO NVARCHAR(32) NOT NULL,
	TEN NVARCHAR(11) NOT NULL,
	SDT VARCHAR(13) NOT NULL,
	CCCD VARCHAR(13) NOT NULL,
	EMAIL varchar(254) NOT NULL,
	SL INT
)
go
INSERT INTO KHACHHANG(MAKH,HO,TEN,SDT,CCCD,EMAIL)
VALUES('KH01',N'Lê Nguyễn Nhật',N'Tân','0969712444','040302001177','lenguyennhattan@gmail.com')
INSERT INTO KHACHHANG(MAKH,HO,TEN,SDT,CCCD,EMAIL)
VALUES('KH02',N'Doãn Hoàng',N'Huy','0969712333','040302003467','QuyZhamon@gmail.com')
INSERT INTO KHACHHANG(MAKH,HO,TEN,SDT,CCCD,EMAIL)
VALUES('KH03',N'Dương Duy',N'Suy','096971222','040302001234','duongduysuy@gmail.com')
--select * from KHACHHANG
GO
CREATE TABLE NHANVIEN
(
	MANV VARCHAR(11) NOT NULL PRIMARY KEY,
	HOTEN NVARCHAR(50) NOT NULL,
	GIOITINH NVARCHAR(6) NOT NULL,
	NGAYSINH DATE NOT NULL,
	SDT VARCHAR(13) NOT NULL,
	CCCD varchar(13) NOT NULL,
	EMAIL VARCHAR(254),
	ANH image
)
GO
INSERT INTO NHANVIEN(MANV,HOTEN,GIOITINH,NGAYSINH,SDT,CCCD,EMAIL)
VALUES('NV01',N'Chu Tiến Bình',N'Nam','2003-12-26','0942617888','040203007313','chutienbinh2003@gmail.com')
INSERT INTO NHANVIEN(MANV,HOTEN,GIOITINH,NGAYSINH,SDT,CCCD,EMAIL)
VALUES('NV02',N'Lê Văn Luyện',N'Nữ','2003-07-26','0942617887','040203007315','levanluyen9999@gmail.com')
INSERT INTO NHANVIEN(MANV,HOTEN,GIOITINH,NGAYSINH,SDT,CCCD,EMAIL)
VALUES('NV03',N'Trần Nhật Huy',N'Nam','2003-08-24','0942617886','040203007318','trannhathuy@gmail.com')
GO
CREATE TABLE TOUR
(
	MATOUR VARCHAR(11) NOT NULL PRIMARY KEY,
	TENTOUR NVARCHAR(150) NOT NULL,
	GIATOUR DECIMAL NOT NULL CHECK (GIATOUR >0),
	NGAYDI DATE NOT NULL,
	NGAYKETTHUC DATE NOT NULL,
	MOTA NVARCHAR(400),
	TRANGTHAI NVARCHAR(50),
	MALTOUR VARCHAR(5) NOT NULL,
	MADDI VARCHAR(12) NOT NULL ,
	MADDEN VARCHAR(12) NOT NULL,
	MAPT VARCHAR(12),
	MAKS VARCHAR(12),
	ANH1 IMAGE,
	ANH2 IMAGE,
	ANH3 IMAGE
)
GO
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN,MAPT,MAKS)
VALUES('T01',N'Phú Quốc-Ngắm Hoàng Hôn Tại Sunset Sanato-Bãi Sao',2300000,'2023-10-10','2023-10-23',N'Phú Quốc là điểm nghỉ dưỡng, tham quan. Đến với Sunset Sanato Beach Club hòa cùng những bản nhạc sôi động, những góc ảnh check-in cực chất và thưởng ngoạn phong cảnh tuyệt đẹp hòa cùng ánh hoàng hôn rực rỡ đang dần dần buông xuống mặt biển bao la.','đang còn','LT01','DKH01','DDL01','PT01','KS01')
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN)
VALUES('T02',N'Đà Nẵng - Bà Nà - Cầu Vàng - Sơn Trà - Hội An',1500000,'2023-08-07','2023-08-17',N'Phố cổ Hội An với lung linh sắc màu của đèn lồng và những hoạt động dân gian đặc sắc Đại Nội Huế rộng lớn nơi hoàng cung xưa của các vua chúa Triều Nguyễn Động Phong Nha thuộc quần thể Di sản thiên nhiên Thế Giới.',NULL,'LT01','DKH02','DDL02')
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN)
VALUES('T03',N'Hà Nội - Hồ Hoàn Kiếm - Quốc Tử Giám',3100000,'2023-09-11','2023-09-18',N'Hà Nội nằm ở tả ngạn sông Đà và hai bên đồng bằng sông Hồng. Phía Bắc giáp với tỉnh Vĩnh Phúc và Thái Nguyên, phía Nam giáp tỉnh Hòa Bình, phía Đông giáp với tỉnh Bắc Ninh và Hưng Yên, còn phía Tây giáp tỉnh Vĩnh Phúc.',NULL,'LT01','DKH01','DDL03')
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN)
VALUES('T04',N'Vịnh Hạ Long - Đảo Tuần Châu - Động Thiên Cung',2550000,'2023-11-15','2023-11-20',N'Vịnh Hạ Long là một vịnh nhỏ thuộc phần bờ Tây vịnh Bắc Bộ tại khu vực biển Đông Bắc Việt Nam, bao gồm vùng biển đảo thuộc thành phố Hạ Long, thị xã Cẩm Phả và một phần của huyện đảo Vân Đồn.',NULL,'LT01','DKH02','DDL04')
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN)
VALUES('TN03',N'Du lịch Thái Lan Bangkok - Pattaya',5600000,'2023-10-13','2023-10-17',N'du khách thỏa sức ngắm cảnh trên biển Pattaya và chiêm ngưỡng vẻ đẹp lộng lẫy của toàn cảnh thành phố nhộn nhịp này, ngoài ra du khách có  thể chiêm bái, đốt pháo cầu phúc, cầu may để tỏ lòng tôn kính tại đài tưởng niệm của Đại Tướng Krom Luang Chumporn.',NULL,'LT02','DKH01','DDL05')
INSERT INTO TOUR(MATOUR,TENTOUR,GIATOUR,NGAYDI,NGAYKETTHUC,MOTA,TRANGTHAI,MALTOUR,MADDI,MADDEN)
VALUES('TN04',N'Hàn Quốc - Seoul - Nami Everland',7500000,'2023-12-19','2023-12-26',N'Hàn Quốc là một điểm đến tuyệt vời, chúng ta đã khá quen thuộc về xứ sở Kim Chi qua những bộ phim nổi tiếng. Từ đó bạn cũng có thể hình dung ra một đất nước phát triển với những phong cảnh đẹp của xứ ôn đới.',NULL,'LT02','DKH02','DDL06')
GO
CREATE TABLE LOAITOUR
(
	MALTOUR VARCHAR(5) NOT NULL PRIMARY KEY,
	TENLTOUR NVARCHAR(50) NOT NULL
)
go
INSERT INTO LOAITOUR(MALTOUR,TENLTOUR)
VALUES('LT01',N'TOUR TRONG NƯỚC')
INSERT INTO LOAITOUR(MALTOUR,TENLTOUR)
VALUES('LT02',N'TOUR NGOÀI NƯỚC')
GO
CREATE TABLE DIEMDI
(
	MADDI VARCHAR(12) NOT NULL PRIMARY KEY,
	TENDDI NVARCHAR(50) NOT NULL,
	MALTOUR VARCHAR(5)	NOT NULL
)
GO
INSERT INTO DIEMDI(MADDI,TENDDI,MALTOUR)
VALUES('DKH01',N'HỒ CHÍ MINH','LT01')
INSERT INTO DIEMDI(MADDI,TENDDI,MALTOUR)
VALUES('DKH02',N'HÀ NỘI','LT01')

GO
ALTER TABLE DIEMDI ADD CONSTRAINT fk01_DIEMDI FOREIGN KEY(MALTOUR) REFERENCES LOAITOUR(MALTOUR)
GO
CREATE TABLE DIEMDEN
(
	MADDEN VARCHAR(12) NOT NULL PRIMARY KEY,
	TENDDEN NVARCHAR(50) NOT NULL,
	MALTOUR VARCHAR(5)	NOT NULL
)
GO
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL01',N'PHÚ QUỐC','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL02',N'ĐÀ NẴNG','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL03',N'HÀ NỘI','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL04',N'VỊNH HẠ LONG','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL05',N'BANGKOK','LT02')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL06',N'HÀN QUỐC','LT02')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL07',N'NHA TRANG','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL08',N'HUẾ','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL09',N'VŨNG TÀU','LT01')
INSERT INTO DIEMDEN(MADDEN,TENDDEN,MALTOUR)
VALUES('DDL10',N'SAPA','LT01')
GO
ALTER TABLE DIEMDEN ADD CONSTRAINT fk01_DIEMDEN FOREIGN KEY(MALTOUR) REFERENCES LOAITOUR(MALTOUR)
GO
CREATE TABLE PHUONGTIEN
(
	MAPT VARCHAR(12) NOT NULL PRIMARY KEY,
	TENPT NVARCHAR(50) NOT NULL,
	TRANGTHAI VARCHAR(50)
)
go 
INSERT INTO PHUONGTIEN(MAPT,TENPT,TRANGTHAI)
VALUES('PT01',N'Máy Bay',null)
GO
CREATE TABLE KHACHSAN
(
	MAKS VARCHAR(12) NOT NULL PRIMARY KEY,
	TENKS NVARCHAR(50) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	TRANGTHAI VARCHAR(50)
)
go 
INSERT INTO KHACHSAN(MAKS,TENKS,DIACHI,TRANGTHAI)
VALUES('KS01',N'khách sạn 5 sao','Số 110 tuệ tĩnh',null)
GO
CREATE TABLE HOADON
(
	SOHD VARCHAR(12) NOT NULL PRIMARY KEY,
	NGAYLAP DATE NOT NULL,
	THANHTIEN DECIMAL NOT NULL CHECK (THANHTIEN >0),
	MATOUR VARCHAR(11) NOT NULL,
	MAKH VARCHAR(11) NOT NULL,
	MANV VARCHAR(11) NOT NULL,
	TRANGTHAI NVARCHAR(30),
)
INSERT INTO HOADON(SOHD,NGAYLAP,THANHTIEN,MATOUR,MAKH,MANV,TRANGTHAI)
VALUES('HD01','2023-10-23',2300000,'T01','KH01','NV01',NULL)
INSERT INTO HOADON(SOHD,NGAYLAP,THANHTIEN,MATOUR,MAKH,MANV,TRANGTHAI)
VALUES('HD02','2023-08-17',1500000,'T02','KH02','NV02',NULL)
INSERT INTO HOADON(SOHD,NGAYLAP,THANHTIEN,MATOUR,MAKH,MANV,TRANGTHAI)
VALUES('HD03','2023-10-13',5600000,'TN03','KH03','NV03',NULL)
GO
ALTER TABLE HOADON ADD CONSTRAINT fk01_HOADON FOREIGN KEY(MATOUR) REFERENCES TOUR(MATOUR)
ALTER TABLE HOADON ADD CONSTRAINT fk02_HOADON FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH)
ALTER TABLE HOADON ADD CONSTRAINT fk03_HOADON FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV)
GO
CREATE TABLE TAIKHOAN
(
	LTK NVARCHAR(30) NOT NULL PRIMARY KEY,
	TENTAIKHOAN NVARCHAR(30) NOT NULL,
	MATKHAU VARCHAR(50) NOT NULL,
	ANHTK IMAGE
)
-- tạo bảng diemdi,diemden,loaitour trc 
GO
ALTER TABLE TOUR ADD CONSTRAINT fk01_TOUR FOREIGN KEY(MADDEN) REFERENCES DIEMDEN(MADDEN)
ALTER TABLE TOUR ADD CONSTRAINT fk02_TOUR FOREIGN KEY(MADDI) REFERENCES DIEMDI(MADDI)
ALTER TABLE TOUR ADD CONSTRAINT fk03_TOUR FOREIGN KEY(MALTOUR) REFERENCES LOAITOUR(MALTOUR)
ALTER TABLE TOUR ADD CONSTRAINT fk04_TOUR FOREIGN KEY(MAPT) REFERENCES PHUONGTIEN(MAPT)
ALTER TABLE TOUR ADD CONSTRAINT fk05_TOUR FOREIGN KEY(MAKS) REFERENCES KHACHSAN(MAKS)
CREATE TABLE TAIKHOANEMAIL
(
	LTKEMAIL NVARCHAR(30) NOT NULL PRIMARY KEY,
	EMAIL NVARCHAR(30) NOT NULL,
	MKEMAIL VARCHAR(50) NOT NULL,
	ANHTKEMAIL IMAGE
)